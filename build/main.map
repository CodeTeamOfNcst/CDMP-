{"version":3,"sources":["webpack:///webpack/bootstrap 2fcafa14522245e11065","webpack:///./server/dbconfig/dbinit.js","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///external \"path\"","webpack:///external \"sequelize\"","webpack:///./nuxt.config.js","webpack:///./server/router.js","webpack:///external \"assert\"","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-logger\"","webpack:///external \"koa-session\"","webpack:///external \"koa-static\"","webpack:///external \"koa2-cors\"","webpack:///external \"nuxt\"","webpack:///./~/Date/date.js","webpack:///./server/dbconfig/dbconfig.js","webpack:///./server/service/test_service.js","webpack:///external \"koa-router\"","webpack:///external \"regenerator-runtime\"","webpack:///./server/index.js","webpack:///./server/util/modelFns.js"],"names":["path","require","sequelize","Apply","import","Device","DeviceType","Message","MessageKlass","Rule","User","UserKlass","belongsTo","as","module","exports","head","title","meta","charset","name","content","hid","link","rel","type","href","css","loading","color","build","vendor","plugins","router","prefix","get","DATABASE","USERNAME","PASSWORD","DBHOST","host","dialect","pool","max","min","acquire","idle","testGetData","ctx","next","body","status","message","AddUser","addDataToDataBase","findOrCreate","where","admin","commonUser","badGay","account","password","email","userType","user1","user2","user3","rule1","rule2","rule3","successMessageType","commonMessageType","failMessageType","successMessage","isPublished","isRead","deviceType","commonMessage","failMessage","computerDeviceType","chemicalDeviceType","metallurgicalDeviceType","device1","description","imgFilePath","device2","device3","apply1","vioReason","applyer","applyDevice","apply2","apply3","getOrCreateData","getOrCreate","app","process","env","HOST","port","PORT","SESSION_CONFIG","key","maxAge","overwrite","httpOnly","signed","rolling","database","authenticate","console","log","error","Assert","ok","sync","force","use","logger","bodyParser","session","koaStatic","__dirname","Cors","routes","allowedMethods","config","dev","nuxt","builder","Promise","resolve","reject","res","on","render","req","promise","then","catch","listen","start","Model","Condition","findOne","include","err","create"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2fcafa14522245e11065","const path = require('path')\r\nconst sequelize = require('../dbconfig/dbconfig')\r\n\r\n// 这边后期应该加上啊循环自动导入model，先放着\r\nconst Apply = sequelize.import('../server/models/Apply')\r\nconst Device = sequelize.import('../server/models/Device')\r\nconst DeviceType = sequelize.import('../server/models/DeviceType')\r\nconst Message = sequelize.import('../server/models/Message')\r\nconst MessageKlass = sequelize.import('../server/models/MessageKlass')\r\nconst Rule = sequelize.import('../server/models/Rule')\r\nconst User = sequelize.import('../server/models/User')\r\nconst UserKlass = sequelize.import('../server/models/UserKlass')\r\n\r\nMessage.belongsTo(MessageKlass, {as: \"messageType\"})\r\nUser.belongsTo(UserKlass, {as: \"userType\"})\r\nDevice.belongsTo(DeviceType, {as: \"deviceType\"})\r\nApply.belongsTo(User, {as: \"applyer\"})\r\nApply.belongsTo(Device, {as: \"applyDevice\"})\r\n\r\nmodule.exports = {\r\n    Apply,\r\n    Device,\r\n    DeviceType,\r\n    Message,\r\n    MessageKlass,\r\n    Rule,\r\n    User,\r\n    UserKlass,\r\n    \r\n    sequelize\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/dbconfig/dbinit.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 1\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 3\n// module chunks = 0","module.exports = {\r\n  /*\r\n  ** Headers of the page\r\n  */\r\n  head: {\r\n    title: 'starter',\r\n    meta: [\r\n      { charset: 'utf-8' },\r\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\r\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\r\n    ],\r\n    link: [\r\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\r\n    ]\r\n  },\r\n  /*\r\n  ** Global CSS\r\n  */\r\n  css: ['~assets/css/main.css', 'element-ui/lib/theme-chalk/index.css'],\r\n  /*\r\n  ** Customize the progress-bar color\r\n  */\r\n  loading: { color: '#3B8070' },\r\n  /**\r\n  ** 防止重复打包\r\n  */\r\n  build: {\r\n    vendor: ['axios', 'element-ui']\r\n  },\r\n  /**\r\n  ** 添加插件\r\n  */\r\n  plugins: ['~plugins/element-ui']\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import Router from 'koa-router'\r\nimport { testGetData, AddUser, addDataToDataBase, getOrCreateData } from './service/test_service'\r\n\r\n\r\n/**\r\n * 全局 service router 定义\r\n */\r\nmodule.exports = () => {\r\n    const router = new Router({\r\n        prefix: '/api'\r\n    })\r\n\r\n    router.get('/test', testGetData)\r\n    router.get('/initDataBase', getOrCreateData)\r\n\r\n    return router\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/router.js","module.exports = require(\"assert\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"assert\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"koa-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-logger\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"koa-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-session\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"koa2-cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa2-cors\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 13\n// module chunks = 0","/*global require: true, provide: true */\n(function () {\n  \"use strict\";\n  /*jslint onevar: true, undef: true, newcap: true, nomen: true, regexp: true, plusplus: true, strict: true */\n\n  /** ES5 ISO Date Parser Plus toISOString Method\n   * @author          Andrea Giammarchi\n   * @blog            WebReflection\n   * @version         2009-07-04T11:36:25.123Z\n   * @compatibility   Chrome, Firefox, IE 5+, Opera, Safari, WebKit, Others\n   */\n\n  function debug(matches) {\n    matches.forEach(function (match, i) {\n      console.log(i, match);\n    });\n  }\n\n  function ISO(datestring) {\n                    //    1        3        5        7       8       10     12        13   15     16      17\n                    // yyyy   -   mm   -   dd  'T'  HH  :   MM   :   ss    .ms       'Z'  +/-     HH  :   MM \n                    //        ?        ?        ?                ?         ?\n      var pattern = /^(\\d{4})(-(\\d{2})(-(\\d{2})(T(\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|((\\+|-)(\\d{2}):(\\d{2}))))?)?)?$/,\n        match = pattern.exec(datestring),\n        date = new Date(),\n        hour,\n        minute,\n        aheadOfUtc;\n\n      if(null === match) {\n        return false;\n        // throw new Error(\"Invalid ISO String\");\n      }\n\n      //debug(match);\n\n      // The bit-shifting is shorthand for `Number(m) || 0`\n      date.setUTCFullYear(match[1] >> 0);\n      date.setUTCMonth(match[3] ? (match[3] >> 0) - 1 : 0);\n      date.setUTCDate(match[5] >> 0);\n      date.setUTCHours(match[7] >> 0);\n      date.setUTCMinutes(match[8] >> 0);\n      date.setUTCSeconds(match[10] >> 0);\n      date.setUTCMilliseconds(match[12] >> 0);\n\n      // Adjust to UTC offset\n      if (match[13] && match[13] !== \"Z\") {\n        hour = match[16] >> 0;\n        minute = match[17] >> 0;\n        aheadOfUtc = (match[15] === \"+\");\n\n        hour = hour * 60 * 60 * 1000;\n        minute = minute * 60 * 1000;\n\n        if (aheadOfUtc) {\n          hour = -hour;\n          minute = -minute;\n        }\n\n        // easy dateline wrapping\n        date = new Date(date.valueOf() + hour + minute);\n      }\n      return date;\n  }\n\n  function padHour2(i) {\n    return (i < 10) ? (\"0\" + i) : i;\n  }\n\n  function padMs3(i) {\n    if (i.length < 2) {\n      return \"00\" + i;\n    }\n\n    if (i.length < 3) {\n      return \"0\" + i;\n    }\n\n    if  (3 < i.length)  {\n      return Math.round(i / Math.pow(10, i.length - 3));\n    }\n\n    return i;\n    // return i.length < 2 ? \"00\" + i : i.length < 3 ? \"0\" + i : 3 < i.length ? Math.round(i / Math.pow(10, i.length - 3)) : i\n  }\n\n  function toISOString () {\n    return [\n      this.getUTCFullYear(), \"-\",\n      padHour2(this.getUTCMonth() + 1), \"-\",\n      padHour2(this.getUTCDate()), \"T\",\n      padHour2(this.getUTCHours()), \":\",\n      padHour2(this.getUTCMinutes()), \":\",\n      padHour2(this.getUTCSeconds()), \".\",\n      padMs3(String(this.getUTCMilliseconds())), \"Z\"\n    ].join(\"\");\n  }\n\n\n  // Do nothing if this interpretor is es5 ready\n  // otherwise, add es5 functionality\n\n  if (!Date.ISO) {\n    Date.ISO = ISO;\n  }\n\n  if (!Date.prototype.toISOString) {\n    Date.prototype.toISOString = Date.prototype.toISOString || toISOString;\n  }\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/Date/date.js\n// module id = 14\n// module chunks = 0","import Sequelize from 'sequelize'\r\n\r\n// 工作室服务器环境\r\n// const DATABASE = 'cdmp'\r\n// const USERNAME = 'root'\r\n// const PASSWORD = '123456'\r\n// const DBHOST = '10.55.91.107'\r\n\r\n// 本地服务器环境\r\n\r\nconst DATABASE = 'cdmp'\r\nconst USERNAME = 'root'\r\nconst PASSWORD = 'admin'\r\nconst DBHOST=  '127.0.0.1'      \r\n\r\nconst sequelize = new Sequelize(DATABASE, USERNAME, PASSWORD, {\r\n    host: DBHOST,\r\n    dialect: 'mysql',\r\n\r\n    pool: {\r\n        max: 5,\r\n        min: 10,\r\n        acquire: 30000,\r\n        idle: 10000\r\n    },\r\n})\r\n\r\nmodule.exports = sequelize\n\n\n// WEBPACK FOOTER //\n// ./server/dbconfig/dbconfig.js","import { sequelize,Apply,Device,DeviceType,Message,MessageKlass,Rule,User,UserKlass, } from '../dbconfig/dbinit'\r\nimport Sequelize from 'sequelize'\r\nimport Date from 'Date'\r\nimport { getOrCreate } from '../util/modelFns'\r\n\r\nmodule.exports.testGetData = async (ctx, next) => {\r\n    ctx.body = {\r\n        status: 1,\r\n        message: 'Get Data From Test Get',\r\n    }\r\n}\r\nmodule.exports.AddUser = async ( ctx, next ) => {\r\n\r\n}\r\n\r\nmodule.exports.addDataToDataBase = async ( ctx, next ) => {\r\n\r\n        let admin = await UserKlass.findOrCreate({ where: { name: '管理员' } })[0] \r\n        let commonUser = await UserKlass.findOrCreate({ where: { name: '用户' } })[0]\r\n        let badGay = await UserKlass.findOrCreate({ where: { name: '关系用户' } })[0]\r\n\r\n        let user1 = await User.findOrCreate({ where: { account: 'haoyiqing', password: '123456', name: '郝一擎', email: '1337074512@qq.com', userType: admin} })[0]\r\n        let user2 = await User.findOrCreate({ where: { account: 'zhanglingxue', password: '123456', name: '张凌雪', email: 'zhanglingxue@qq.com', userType: commonUser} })[0]\r\n        let user3 = await User.findOrCreate({ where: { account: 'wangyangyang', password: '123456', name: '王洋洋', email: 'wangyangyang@qq.com', userType: badGay} })[0]\r\n\r\n        let rule1 = await Rule.findOrCreate({ where: { content: '第一条公告', title: '第一条公告'} })[0]\r\n        let rule2 = await Rule.findOrCreate({ where: { content: '第二条公告', title: '第二条公告'} })[0]\r\n        let rule3 = await Rule.findOrCreate({ where: { content: '第三条公告', title: '第三条公告'} })[0]\r\n\r\n        let successMessageType = MessageKlass.findOrCreate({ where: { name: '成功' } })[0]\r\n        let commonMessageType = MessageKlass.findOrCreate({ where: { name: '普通消息'} })[0]\r\n        let failMessageType = MessageKlass.findOrCreate({ where: { name: '失败消息'} })[0]\r\n\r\n        let successMessage = Message.findOrCreate({ where: { content: '这是一条成功的消息', isPublished: false, isRead: false, deviceType: successMessageType} })[0]\r\n        let commonMessage = Message.findOrCreate({ where: { content: '这是一条普通的消息', isPublished: false, isRead: false, deviceType: commonMessageType} })[0]\r\n        let failMessage = Message.findOrCreate({ where: { content: '这是一条失败的消息', isPublished: false, isRead: false, deviceType: failMessageType} })[0]\r\n\r\n        let computerDeviceType = DeviceType.findOrCreate({ where: { name: '计算机系' } })[0]\r\n        let chemicalDeviceType = DeviceType.findOrCreate({ where: { name: '化学系' } })[0]\r\n        let metallurgicalDeviceType = DeviceType.findOrCreate({ where: { name: '冶金系' } })[0]\r\n\r\n        let device1 = Device.findOrCreate({ where: { name: '计算机系的仪器', description: '这是计算机系的仪器', deviceType: computerDeviceType, imgFilePath: '/upload/device/device1' } })[0]\r\n        let device2 = Device.findOrCreate({ where: { name: '化工系的仪器', description: '这是化工系的仪器', deviceType: chemicalDeviceType, imgFilePath: '/upload/device/device2' } })[0]\r\n        let device3 = Device.findOrCreate({ where: { name: '冶金系的仪器', description: '这是冶金系的仪器', deviceType: metallurgicalDeviceType, imgFilePath: '/upload/device/device3' } })[0]\r\n\r\n        let apply1 = Apply.findOrCreate({ where: { vioReason: 'user1 想要用计算机系的仪器', applyer: user1, applyDevice: device1 } })[0]\r\n        let apply2 = Apply.findOrCreate({ where: { vioReason: 'user2 想要用化学系的仪器', applyer: user2, applyDevice: device2 } })[0]\r\n        let apply3 = Apply.findOrCreate({ where: { vioReason: 'user3 想要用冶金系的仪器', applyer: user3, applyDevice: device2 } })[0]\r\n\r\n        ctx.body = {\r\n            message: 'success!'\r\n        }\r\n    \r\n}\r\n\r\nexports.getOrCreateData = async ( ctx, next ) => {\r\n\r\n        let admin = await getOrCreate(UserKlass, { name: '管理员' } )\r\n        let commonUser = await getOrCreate(UserKlass, { name: '用户' } )\r\n        let badGay = await getOrCreate(UserKlass, { name: '关系用户' } )\r\n\r\n        let user1 = await getOrCreate(User, { account: 'haoyiqing', password: '123456', name: '郝一擎', email: '1337074512@qq.com', userType: admin })\r\n        let user2 = await getOrCreate(User, { account: 'zhanglingxue', password: '123456', name: '张凌雪', email: 'zhanglingxue@qq.com', userType: commonUser })\r\n        let user3 = await getOrCreate(User, { account: 'wangyangyang', password: '123456', name: '王洋洋', email: 'wangyangyang@qq.com', userType: badGay })\r\n\r\n        let rule1 = await getOrCreate(Rule, { content: '第一条公告', title: '第一条公告' } )\r\n        let rule2 = await getOrCreate(Rule, { content: '第二条公告', title: '第二条公告' } )\r\n        let rule3 = await getOrCreate(Rule, { content: '第三条公告', title: '第三条公告' } )\r\n\r\n        let successMessageType = getOrCreate(MessageKlass, { name: '成功' })\r\n        let commonMessageType = getOrCreate(MessageKlass, { name: '普通消息' })\r\n        let failMessageType = getOrCreate(MessageKlass, { name: '失败消息' })\r\n\r\n        let successMessage = getOrCreate(Message, { content: '这是一条成功的消息', isPublished: false, isRead: false, deviceType: successMessageType })\r\n        let commonMessage = getOrCreate(Message, { content: '这是一条普通的消息', isPublished: false, isRead: false, deviceType: commonMessageType })\r\n        let failMessage = getOrCreate(Message, { content: '这是一条失败的消息', isPublished: false, isRead: false, deviceType: failMessageType })\r\n\r\n        let computerDeviceType = getOrCreate(DeviceType, { name: '计算机系' })\r\n        let chemicalDeviceType = getOrCreate(DeviceType, { name: '化学系' })\r\n        let metallurgicalDeviceType = getOrCreate(DeviceType, { name: '冶金系' })\r\n\r\n        let device1 = getOrCreate(Device, { name: '计算机系的仪器', description: '这是计算机系的仪器', deviceType: computerDeviceType, imgFilePath: '/upload/device/device1' })\r\n        let device2 = getOrCreate(Device, { name: '化工系的仪器', description: '这是化工系的仪器', deviceType: chemicalDeviceType, imgFilePath: '/upload/device/device2' })\r\n        let device3 = getOrCreate(Device, { name: '冶金系的仪器', description: '这是冶金系的仪器', deviceType: metallurgicalDeviceType, imgFilePath: '/upload/device/device3' })\r\n\r\n        let apply1 = getOrCreate(Apply, { vioReason: 'user1 想要用计算机系的仪器', applyer: user1, applyDevice: device1 })\r\n        let apply2 = getOrCreate(Apply, { vioReason: 'user2 想要用化学系的仪器', applyer: user2, applyDevice: device2 })\r\n        let apply3 = getOrCreate(Apply, { vioReason: 'user3 想要用冶金系的仪器', applyer: user3, applyDevice: device2 })\r\n\r\n        ctx.body = {\r\n            message: 'success!'\r\n        }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/service/test_service.js","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 18\n// module chunks = 0","import Koa from 'koa'\r\nimport { Nuxt, Builder } from 'nuxt'\r\nimport Assert from 'assert'\r\nimport Cors from 'koa2-cors'\r\n\r\nconst path = require('path')\r\nconst logger = require('koa-logger')\r\nconst koaStatic = require('koa-static')\r\nconst session = require('koa-session')\r\nconst bodyParser = require('koa-bodyparser')\r\n\r\nconst database = require('./dbconfig/dbinit')\r\nconst router = require('./router')()\r\n\r\nasync function start () {\r\n  const app = new Koa()\r\n  const host = process.env.HOST || '127.0.0.1'\r\n  const port = process.env.PORT || 3000\r\n  const SESSION_CONFIG = {key: 'koa:sess', maxAge: 86400000,overwrite: true, httpOnly: true, signed: true, rolling: false}\r\n  /**\r\n  ** Test connecton\r\n  */\r\n  try{\r\n    await database.sequelize.authenticate()\r\n    console.log('Connection has been established successfully.')\r\n  }catch(err){\r\n    console.error('Unable to connect to the database', err)\r\n    Assert.ok(false, 'Unable to connect to the database')\r\n  }\r\n \r\n  \r\n  if(process.env.NODE_ENV === \"development\"){\r\n    /**\r\n     ** Sync DB\r\n    */\r\n    await database.sequelize.sync({ force: true })\r\n    console.log(\"Database Sync successfully\")\r\n  }\r\n  // init middleware \r\n  app.use(logger())\r\n  app.use(bodyParser())\r\n  app.use(session(SESSION_CONFIG, app));\r\n  app.use(koaStatic(__dirname + '/uploads'))\r\n  app.use(Cors())//允许跨域访问\r\n  app.use(router.routes()).use(router.allowedMethods())\r\n\r\n  // Import and Set Nuxt.js options\r\n  let config = require('../nuxt.config.js')\r\n  config.dev = !(app.env === 'production')\r\n\r\n  // Instantiate nuxt.js\r\n  const nuxt = new Nuxt(config)\r\n\r\n  // Build in development\r\n  if (config.dev) {\r\n    const builder = new Builder(nuxt)\r\n    await new Builder(nuxt).build()\r\n  }\r\n\r\n  app.use(async (ctx, next) => {\r\n    await next()\r\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\r\n    return new Promise((resolve, reject) => {\r\n      ctx.res.on('close', resolve)\r\n      ctx.res.on('finish', resolve)\r\n      nuxt.render(ctx.req, ctx.res, promise => {\r\n        // nuxt.render passes a rejected promise into callback on error.\r\n        promise.then(resolve).catch(reject)\r\n      })\r\n    })\r\n  })\r\n\r\n  app.listen(port, host)\r\n  console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\r\n}\r\nstart()\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","import Sequelize from 'sequelize'\r\n\r\n/**\r\n * 查询对应的 model， 若不存在则创建\r\n * @param { [object] } Model 需要操作的模型\r\n * @param { [json] } Condition 查询条件，不存在则直接为创建条件\r\n */\r\nexports.getOrCreate = async (Model, Condition) => {\r\n    try {\r\n        return await Model.findOne({ where: Condition }, include)\r\n    }catch(err){\r\n        console.err('Model entity doesn\\'t exist', err)\r\n        return await Model.create( Condition )\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/util/modelFns.js"],"sourceRoot":""}